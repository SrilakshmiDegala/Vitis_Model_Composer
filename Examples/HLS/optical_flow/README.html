

<html>
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<h1 id="optical-flow">Optical flow</h1>
<html>    
<script>
function myFunction() {

var path = document.location.pathname;
var directory = path.substring(path.indexOf('/'), path.lastIndexOf('/'));

commandURI="matlab:XmcExampleApi.openExample('optical_flow');"

document.location=commandURI
}
</script>
<noscript>Sorry, your browser does not support JavaScript!</noscript>
       
<button type="button" style="background-color:#d0d028; font-size: 20px;" onclick="myFunction()">Open Design</button>  
              
</html>
<p>This example demonstrates an implementation of dense optical flow in Model Composer.</p>
<p>This example uses the following Mathworks toolboxes:  </p>
<ul>
<li><a href="https://www.mathworks.com/products/computer-vision.html">MATLAB Computer Vision System Toolbox</a>  </li>
<li><a href="https://www.mathworks.com/products/dsp-system.html">DSP System Toolbox</a></li>
</ul>
<p>You also need to have a Vitis Model Composer license to simulate this example.</p>
<h2 id="what-is-dense-optical-flow">What is dense optical flow?</h2>
<p>Optical flow is the apparent motion of objects between two consecutive frames caused by the movement of objects or camera. This example demonstrates the Luckas-Kanade (LK) optical flow algorithm using Model Composer. The algorithm is based on two assumptions:</p>
<ul>
<li>Object pixel intensities do not change between consecutive frames.</li>
<li>Neighboring pixels have similar motion.</li>
</ul>
<h2 id="input-sources-to-this-example">Input sources to this example</h2>
<p>This example provides two input sources, "Moving Objects" and "Moving People". To switch between the two sources, double click on the manual switch block.</p>
<h2 id="moving-objects">Moving Objects</h2>
<p>This source is a ball shaped object moving across the screen. You can set the angle of the movement using the dial.</p>
<p>The reason behind having this source is to get a quantitative analysis of the result of the optical flow algorithm. The dense optical flow calculates a flow vector for every pixel in the image. Each vector has a magnitude and an angle. For each frame, we plot the histogram of the angles of each vector with a non-zero magnitude. As you turn the dial, you would see the angle of the vectors change.</p>
<p><img src="Images/histo_45.png" alt="" /></p>
<p>The other view into the results is a color coded output video. This is an HSV (Hue, Saturation, Lightness) representation of the image. The angle of the vectors are represented by the Hue of the pixel. As you turn the knob, you see that the the direction of the object changes but also the color of the object.</p>
<p><img src="Images/color_coded.png" alt="" /></p>
<h2 id="moving-people">Moving people</h2>
<p>This is a real life situation video of two people moving in a scene. For this input source, the histogram is no longer a good view into the results and as such we close the histogram.</p>
<p><img src="Images/moving_people.png" alt="" /></p>
<hr />
<p>Copyright 2020 Xilinx</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");<br />
you may not use this file except in compliance with the License.<br />
You may obtain a copy of the License at</p>
<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>
<p>Unless required by applicable law or agreed to in writing, software<br />
distributed under the License is distributed on an "AS IS" BASIS,<br />
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br />
See the License for the specific language governing permissions and<br />
limitations under the License.</p>

</div>
<style type='text/css'>body {
font: 400 16px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;
color: #111;
background-color: #fdfdfd;
-webkit-text-size-adjust: 100%;
-webkit-font-feature-settings: "kern" 1;
-moz-font-feature-settings: "kern" 1;
-o-font-feature-settings: "kern" 1;
font-feature-settings: "kern" 1;
font-kerning: normal;
padding: 30px;
}

@media only screen and (max-width: 600px) {
body {
padding: 5px;
}

body > #content {
padding: 0px 20px 20px 20px !important;
}
}

body > #content {
margin: 0px;
max-width: 900px;
border: 1px solid #e1e4e8;
padding: 10px 40px;
padding-bottom: 20px;
border-radius: 2px;
margin-left: auto;
margin-right: auto;
}

hr {
color: #bbb;
background-color: #bbb;
height: 1px;
flex: 0 1 auto;
margin: 1em 0;
padding: 0;
border: none;
}

/**
* Links
*/
a {
color: #0366d6;
text-decoration: none; }
a:visited {
color: #0366d6; }
a:hover {
color: #0366d6;
text-decoration: underline; }

pre {
background-color: #f6f8fa;
border-radius: 3px;
font-size: 85%;
line-height: 1.45;
overflow: auto;
padding: 16px;
}

/**
* Code blocks
*/

code {
background-color: rgba(27,31,35,.05);
border-radius: 3px;
font-size: 85%;
margin: 0;
word-wrap: break-word;
padding: .2em .4em;
font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
}

pre > code {
background-color: transparent;
border: 0;
display: inline;
line-height: inherit;
margin: 0;
overflow: visible;
padding: 0;
word-wrap: normal;
font-size: 100%;
}


/**
* Blockquotes
*/
blockquote {
margin-left: 30px;
margin-top: 0px;
margin-bottom: 16px;
border-left-width: 3px;
padding: 0 1em;
color: #828282;
border-left: 4px solid #e8e8e8;
padding-left: 15px;
font-size: 18px;
letter-spacing: -1px;
font-style: italic;
}
blockquote * {
font-style: normal !important;
letter-spacing: 0;
color: #6a737d !important;
}

/**
* Tables
*/
table {
border-spacing: 2px;
display: block;
font-size: 14px;
overflow: auto;
width: 100%;
margin-bottom: 16px;
border-spacing: 0;
border-collapse: collapse;
}

td {
padding: 6px 13px;
border: 1px solid #dfe2e5;
}

th {
font-weight: 600;
padding: 6px 13px;
border: 1px solid #dfe2e5;
}

tr {
background-color: #fff;
border-top: 1px solid #c6cbd1;
}

table tr:nth-child(2n) {
background-color: #f6f8fa;
}

/**
* Others
*/

img {
max-width: 100%;
}

p {
line-height: 24px;
font-weight: 400;
font-size: 16px;
color: #24292e; }

ul {
margin-top: 0; }

li {
color: #24292e;
font-size: 16px;
font-weight: 400;
line-height: 1.5; }

li + li {
margin-top: 0.25em; }

* {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
color: #24292e; }

a:visited {
color: #0366d6; }

h1, h2, h3 {
border-bottom: 1px solid #eaecef;
color: #111;
/* Darker */ }</style>
</body>
</html>
