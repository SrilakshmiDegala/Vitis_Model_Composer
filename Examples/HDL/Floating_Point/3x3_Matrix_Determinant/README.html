<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<script>
function myFunction() {

var path = document.location.pathname;
var directory = path.substring(path.indexOf('/'), path.lastIndexOf('/'));

commandURI="matlab:XmcExampleApi.openExample('3x3_Matrix_Determinant');"

document.location=commandURI
}
</script>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="/proj/xcoswmktg/robg/git/markdown_to_html/style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="3x3-matrix-determinant" class="level1">
    <h1>3x3 Matrix Determinant</h1>
    <button type="button" style="background-color:#d0d028; font-size: 20px;" onclick="myFunction()">Open Design</button>  
<p>This design demonstrates the calculation of the determinant of a 3x3
matrix with real, single precision floating point elements. It showcases
the Black Box block for bringing hand-coded VHDL or Verilog code into
Model Composer. It also shows the DSPFP32 for performing floating-point
operations on Versal devices.</p>
<section id="design" class="level2">
<h2>Design</h2>
<p><img src="images/screenshot.png" /></p>
<p>The Simulink model implements the 3x3 Matrix Determinant in 3
different ways, and compares them to each other:</p>
<ol type="1">
<li>The MATLAB function <code>det(u)</code>.</li>
<li>Basic Simulink blocks that decompose the determinant calculation
into multiplication and addition operations.</li>
<li>Model Composer blocks (including DSPFP32) for which HDL code can be
generated.</li>
</ol>
<p>A second model is provided that replaces method 3 with a hand-coded
VHDL implementation of the 3x3 matrix determinant. The VHDL is brought
into Model Composer as a Black Box block.</p>
<p><img src="images/blackbox.png" /></p>
</section>
<section id="mathematical-background" class="level2">
<h2>Mathematical Background</h2>
<p>Matrix determinant formulas can be defined recursively for matrices
of increasing sizes. A 3x3 matrix determinant can be calculated using
the equations below. These calculations require 9 multiplications and 5
additions. These operations map directly into 9 DSPFP32 blocks on the
hardware.</p>
<p><img src="images/equations.png" /></p>
</section>
<section id="dspfp32-floating-point-block" class="level2">
<h2>DSPFP32 Floating-Point Block</h2>
<p>Vitis Model Composer's HDL library has a block that maps to a DSPFP32
primitive. This primitive supports single-precision floating-point
multiplication and addition operations. The DSPFP32 primitive maps to
hardened DSP58s on Versal devices.</p>
<p><img src="images/dspfp32.png" /></p>
<p>The images below show the flow diagram of the DSPFP32 and the
supported latency and throughput (on Versal) for independent multiply
and add mode, follow by multiply-accumulate (MAC) mode:</p>
<p><img src="images/multiply-add.png" /></p>
<p><img src="images/mac.png" /></p>
<p>9 instances of the DSPFP32 block are connected to implement the 3x3
matrix determinant, as shown below:</p>
</section>
<section class="level2">
<h2><img src="images/det3x3.png" /></h2>
<p>Copyright 2023 Advanced Micro Devices, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you
may not use this file except in compliance with the License. You may
obtain a copy of the License at</p>
<pre><code>http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</section>
</section>
</body>
</html>
